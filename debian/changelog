nginx-x402 (1.3.4-1) unstable; urgency=medium

  * Add timestamp logging for payment verification debugging
  * Log current timestamp when processing X-PAYMENT header
  * Log current timestamp in facilitator response for time-related issue debugging
  * Include maxTimeoutSeconds in payment header logs
  * Add x402_ttl configuration directive for customizing payment authorization TTL (1-3600 seconds, default: 60)
  * Set PaymentRequirements.max_timeout_seconds from configuration
  * Add comprehensive unit and integration tests for timestamp logging
  * Improve code quality: all clippy warnings resolved, formatting applied

nginx-x402 (1.3.3-1) unstable; urgency=medium

  * Add detailed logging for facilitator payment verification responses
  * Log facilitator response details (is_valid and error fields) for debugging
  * Log verification result with duration for performance monitoring
  * Improve error messages to indicate facilitator returned is_valid=false
  * Help diagnose payment verification failures by showing exact facilitator error messages

nginx-x402 (1.3.2-1) unstable; urgency=medium

  * Fix critical memory safety issue causing SIGSEGV crashes with OPTIONS requests
  * Replace unsafe mem::transmute with ngx-rust official API Request::from_ngx_http_request
  * Add null pointer checks before creating Request objects
  * Fix crash in ngx_http_update_location_config when processing CORS preflight requests
  * Improve code safety by using official ngx-rust APIs instead of unsafe transmute

nginx-x402 (1.3.1-1) unstable; urgency=medium

  * Version bump to 1.3.1
  * Add retry logic to integration tests for better stability
  * Configure CI to use single-threaded test execution
  * Fix race conditions in concurrent test execution

nginx-x402 (1.3.0-1) unstable; urgency=medium

  * Version bump to 1.3.0
  * Add automatic full URL building for x402_resource
  * Automatically construct full URL (scheme://host/path) when x402_resource is not configured
  * Add automatic MIME type inference from request headers
  * Set mimeType field in PaymentRequirements automatically
  * Improves compatibility with facilitator APIs requiring full URLs and mimeType

nginx-x402 (1.2.0-1) unstable; urgency=medium

  * Version bump to 1.2.0
  * Add x402_asset directive to support custom token/contract addresses
  * Add x402_network_id directive to specify network by chainId (8453, 84532)
  * Implement chainId to network name mapping (Base Mainnet: 8453, Base Sepolia: 84532)
  * Add fallback logic: custom asset > default USDC, network_id > network name > default
  * Update configuration parsing to support both network name and chainId
  * Add comprehensive integration tests for asset fallback and network_id
  * Update documentation and examples

 -- Ryan Kung <ryan@polyjuice.io>  Thu, 28 Nov 2025 00:00:00 +0000

nginx-x402 (1.1.2-1) unstable; urgency=medium

  * Version bump to 1.1.2
  * Add support for skipping payment verification for OPTIONS and HEAD requests
  * OPTIONS requests (CORS preflight) now bypass payment verification to allow CORS checks
  * HEAD requests now bypass payment verification as they are protocol-level queries
  * Add generic HTTP method detection and handling
  * Add integration tests for OPTIONS and HEAD request handling
  * Improve CORS support for browser-based API requests
  * Fix clippy warnings: use is_ok_and and matches! macro

 -- Ryan Kung <ryan@polyjuice.io>  Thu, 28 Nov 2025 00:00:00 +0000

nginx-x402 (1.1.1-1) unstable; urgency=medium

  * Version bump to 1.1.1
  * Fix: Content-Type: application/json now correctly returns JSON response instead of HTML
  * Improve browser detection logic to prioritize Content-Type header
  * Add integration tests for Content-Type: application/json behavior

 -- Ryan Kung <ryan@polyjuice.io>  Thu, 28 Nov 2025 00:00:00 +0000

nginx-x402 (1.1.0-1) unstable; urgency=medium

  * Version bump to 1.1.0
  * Added support for proxy_pass directive alongside x402 payment verification
  * Moved payment verification to ACCESS_PHASE to ensure it runs before proxy_pass
  * Fixed issue where proxy_pass would override x402 handler
  * Improved error handling for invalid payment headers
  * Added integration tests for proxy_pass compatibility
  * Added mock backend server for testing proxy_pass scenarios

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 27 Nov 2025 00:00:00 +0000

nginx-x402 (1.0.4-1) unstable; urgency=medium

  * Version bump to 1.0.4
  * Fixed workflow build errors by adding nginx source setup steps
  * Added Makefile for easier cargo publish workflow

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 27 Nov 2025 00:00:00 +0000

nginx-x402 (1.0.3-1) unstable; urgency=medium

  * Version bump to 1.0.3
  * Improved build.rs to support NGX_VERSION environment variable
  * Enhanced nginx version detection with fallback support

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 27 Nov 2025 00:00:00 +0000

nginx-x402 (1.0.2-1) unstable; urgency=medium

  * Version bump to 1.0.2
  * Simplified README documentation

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 27 Nov 2025 00:00:00 +0000

nginx-x402 (1.0.1-1) unstable; urgency=medium

  * Version bump to 1.0.1

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 24 Nov 2025 00:00:00 +0000

nginx-x402 (0.1.1-1) unstable; urgency=medium

  * Initial release
  * Pure Rust Nginx module for x402 HTTP micropayment protocol

 -- Ryan Kung <ryan@polyjuice.io>  Mon, 18 Nov 2025 00:00:00 +0000
